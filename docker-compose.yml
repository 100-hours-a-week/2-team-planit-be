services:
  app:
    # 운영 배포 시 레지스트리 이미지 태그를 명시하세요.
    image: ${APP_IMAGE:-planit-be:latest}
    container_name: planit-app
    ports:
      - "8080:8080"
    env_file:
      - path: .env.prod
        required: false
    environment:
      SPRING_PROFILES_ACTIVE: prod
      TZ: Asia/Seoul
      SPRING_DATASOURCE_URL: ${SPRING_DATASOURCE_URL}
      SPRING_DATASOURCE_USERNAME: ${SPRING_DATASOURCE_USERNAME}
      SPRING_DATASOURCE_PASSWORD: ${SPRING_DATASOURCE_PASSWORD}
      JWT_SECRET: ${JWT_SECRET}
      AWS_S3_BUCKET: ${AWS_S3_BUCKET}
      AWS_REGION: ${AWS_REGION:-ap-northeast-2}
      AWS_ACCESS_KEY_ID: ${AWS_ACCESS_KEY_ID}
      AWS_SECRET_ACCESS_KEY: ${AWS_SECRET_ACCESS_KEY}
      CLOUDFRONT_DOMAIN: ${CLOUDFRONT_DOMAIN}
    restart: unless-stopped
